로직을 분리하여 코드 앞으로 이동